require 'json'
require 'time'

begin
  build_config_file_path = File.join(File.dirname(__FILE__), '..', '..', 'build-config.json')
  build_config_file = File.read(build_config_file_path)
  build_config = JSON.parse(build_config_file)
rescue JSON::ParserError
  error_message = "An error occured while parsing the build config. Hint: if you're setting it's value by a environment variable, you should put single quotes around it. E.g. `BUILD_CONFIG='{\"key\":\"value\"}'`"
  UI.error error_message
  raise error_message
end

ios_bundle_identifier = build_config['ios']['bundleIdentifier']
ios_apple_id = build_config['ios']['appleId']
ios_itc_team_id = build_config['ios']['itcTeamId']
ios_team_id = build_config['ios']['teamId']

app_identifier(ios_bundle_identifier)
apple_id(ios_apple_id)

itc_team_id(ios_itc_team_id)
team_id(ios_team_id)

# For more information about the Appfile, see:
#     https://docs.fastlane.tools/advanced/#appfile
